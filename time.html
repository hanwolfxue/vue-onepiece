<!DOCTYPE HTML>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <title> 卸载事件 </title>
  <script type="text/javascript">
    function delhandler() {
      alert(1);
    }
    function getQueryStringArgs() {
      var qs = (location.search.length > 0 ? location.search.substring(1) : ''),
        args = {},
        items = qs.length ? qs.split('&') : [],
        item = null,
        name = null,
        value = null,
        i = 0,
        len = items.length;
      for (i = 0; i < len; i++) {
        item = items[i].split('=');
        name = decodeURIComponent(item[0]);
        value = decodeURIComponent(item[1]);
        if (name.length) {
          args[name] = value;
        }
      }
      return args;
    }
    var i = 0;
    console.log(i);
    i++;
    let cachedScript = {};
    function loadScript(src, callback, component, nocache) {
      let script = cachedScript[src];
      console.log('script is',script);
      if (nocache && script) {
        script.parentNode.removeChild(script);
        script = null;
      }
      if (script) {
        callback && callback();
        return new Promise((resolve) => resolve());
      } else {
        script = document.createElement('script');
        script.src = src;
        document.head.appendChild(script);
        return new Promise((resolve, reject) => {
          script.addEventListener('load', function () {
            cachedScript[src] = script;
            callback && callback();
            resolve();
//            if (!isUnMounted(component)) {
//              callback && callback();
//              resolve();
//            }
          }, false);
          script.addEventListener('error', function () {
            script.parentNode.removeChild(script);
            reject();
          });
        })
      }
    }
    loadScript('//dl.ntalker.com/js/xn6/ntkfstat.js?siteid=kf_9552');

    //    console.log('args ', JSON.stringify(getQueryStringArgs()));
  </script>
</head>
<body>
欢迎学习JavaScript。
<a href="#" id="editBtn">编辑</a>
<a href="#" id="delBtn">删除</a>
<span>12344</span>

<script language="javascript" type="text/javascript">
  window.NTKF_PARAM = {
    siteid: "kf_9552",		            //企业ID，为固定值，必填
    settingid: "kf_9552_1492150519088",	//接待组ID，为固定值，必填
    uid: "12323",		                //用户ID，未登录可以为空，但不能给null，uid赋予的值显示到小能客户端上
    uname: "eminyli@163.com",		    //用户名，未登录可以为空，但不能给null，uname赋予的值显示到小能客户端上
    isvip: "0",                          //是否为vip用户，0代表非会员，1代表会员，取值显示到小能客户端上
    userlevel: "1",		                //网站自定义会员级别，0-N，可根据选择判断，取值显示到小能客户端上
    erpparam: "abc"                      //erpparam为erp功能的扩展字段，可选，购买erp功能后用于erp功能集成
  }
</script>

<!--基础脚本加载 -->
<script type="text/javascript" src="http://dl.ntalker.com/js/xn6/ntkfstat.js?siteid=kf_9552" charset="utf-8"></script>
</body>
</html>
